
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./Style-Esercizio2.css">
    <title>Document</title>
  </head>
  <body>
    <h1>Vuoi scoprire il meteo di una città?</h1>
    <h3>Scoprilo qui!</h3>
    <button onclick="richiesta()">Scopri</button>
    <section id="Meteo_città"></section>
    <script>
      

      function scopri_meteo(meteo) {
       
            
          let div = document.createElement("div");
          div.style.display = "flex";
          div.style.flexDirection = "column";
          div.style.alignItems = "center"; 
          

          let location = document.createElement("p");
          location.style.textAlign = "center";
          location.innerText = "il meteo nella città di " + meteo.location.name + " situata in " + meteo.location.country+" all'ora: " + meteo.location.localtime + " è:";
          console.log(location);

          let weather = document.createElement("h3");
          weather.style.textAlign = "center";
          weather.innerHTML = meteo.current.condition.text;
          console.log(weather);
        

        let imageMeteo = document.createElement("img");
        imageMeteo.style.textAlign = "center";
        image_da_pulire = meteo.current.condition.icon
        image_da_pulire = image_da_pulire.replace("//", "https://");
        imageMeteo.src = image_da_pulire;
        imageMeteo.style.margin = "0 auto";
        imageMeteo.width = 180;
        imageMeteo.height = 180;
    

        div.appendChild(location);
        div.appendChild(weather);
        div.appendChild(imageMeteo);

        document.getElementById("Meteo_città").appendChild(div);
        }
      

      async function richiesta() {
        let input = prompt("inserisci una città");
        let risposta = await fetch(
           "http://api.weatherapi.com/v1/current.json?key=c0e40e7778e8424cb43131233240710&q="+ input +"&aqi=no"
        );
        console.log(risposta);
        let risp = await risposta.json();
        meteo = risp;
        console.log(meteo);
        scopri_meteo(meteo);
      }
    </script>
  </body>
</html>
